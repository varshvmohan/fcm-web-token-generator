<!DOCTYPE html>
<html>
<head>
  <title>FCM Token Generator</title>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-messaging-compat.js"></script>

</head>
<body>

<h2>FCM Web Token Generator</h2>

<button id="getTokenBtn">Generate FCM Token</button>

<br><br>
<textarea id="tokenBox" rows="6" cols="80" placeholder="Your FCM Token will appear here..."></textarea>

<script>
  // ðŸ”¥ Your Firebase Config
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // ðŸ”¥ Your Public Web Push Certificate (VAPID Key)
  const vapidKey = "YOUR_VAPID_KEY";

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();

  // Register service worker
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("firebase-messaging-sw.js")
      .then((registration) => {
        console.log("Service Worker registered:", registration);
        messaging.useServiceWorker(registration);
      })
      .catch((err) => console.error("SW registration failed", err));
  }

  // Button click handler
  document.getElementById("getTokenBtn").addEventListener("click", async function () {
    try {
      const permission = await Notification.requestPermission();

      if (permission !== "granted") {
        alert("Notification permission denied.");
        return;
      }

      const token = await messaging.getToken({ vapidKey });

      if (token) {
        document.getElementById("tokenBox").value = token;
        console.log("FCM Token:", token);
      } else {
        alert("No token generated.");
      }

    } catch (err) {
      console.error("Token Error:", err);
      alert("Error generating token: " + err);
    }
  });
</script>

</body>
</html>
